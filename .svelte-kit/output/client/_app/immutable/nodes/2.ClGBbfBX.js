import"../chunks/CWj6FrbW.js";import{i as oi}from"../chunks/BipqaGHw.js";import{o as Yn,a as li,e as we,s as Pt}from"../chunks/DJJb56M5.js";import{V as ui,b as ci,i as Ue,h as zt,Z as Ae,d as An,z as v,al as Kt,r as fi,e as hi,g as Wn,j as dn,m as ce,X as br,a0 as di,k as kr,l as Ar,p as pi,ax as pn,a4 as Mr,P as Mn,ay as mi,at as Ht,az as Kn,aA as gi,aB as vi,a3 as yi,aC as _i,aD as xi,aE as wi,aF as bi,Y as Sr,T as ki,G as ie,aG as Ai,a1 as Mi,$ as Si,a6 as Vn,aH as Ei,aI as Ti,aJ as Ci,aK as Ni,aL as Ri,D as $i,aM as Pe,aN as Ii,F as Ot,a as At,I as Di,an as Mt,aO as be,aP as Oi,J as j,L as gt,K as J,u as ut,c as mn,f as gn,av as Fi,A as ee,aQ as Li,aw as Pi}from"../chunks/hF6vYYgm.js";import{i as ne,b as vn}from"../chunks/D7N969Ix.js";function yn(t,e){return e}function Hi(t,e,n,r){for(var i=[],s=e.length,a=0;a<s;a++)vi(e[a].e,i,!0);var l=s>0&&i.length===0&&n!==null;if(l){var u=n.parentNode;yi(u),u.append(n),r.clear(),oe(t,e[0].prev,e[s-1].next)}_i(i,()=>{for(var o=0;o<s;o++){var f=e[o];l||(r.delete(f.k),oe(t,f.prev,f.next)),xi(f.e,!l)}})}function _n(t,e,n,r,i,s=null){var a=t,l={flags:e,items:new Map,first:null};{var u=t;a=zt?Ue(Ae(u)):u.appendChild(ui())}zt&&An();var o=null,f=!1,m=Kt(()=>{var p=n();return ki(p)?p:p==null?[]:Mr(p)});ci(()=>{var p=v(m),g=p.length;if(f&&g===0)return;f=g===0;let M=!1;if(zt){var K=fi(a)===hi;K!==(g===0)&&(a=Wn(),Ue(a),dn(!1),M=!0)}if(zt){for(var Q=null,q,V=0;V<g;V++){if(ce.nodeType===br&&ce.data===di){a=ce,M=!0,dn(!1);break}var nt=p[V],st=r(nt,V);q=Er(ce,l,Q,null,nt,st,V,i,e,n),l.items.set(st,q),Q=q}g>0&&Ue(Wn())}zt||zi(p,l,a,i,e,r,n),s!==null&&(g===0?o?kr(o):o=Ar(()=>s(a)):o!==null&&pi(o,()=>{o=null})),M&&dn(!0),v(m)}),zt&&(a=ce)}function zi(t,e,n,r,i,s,a){var l=t.length,u=e.items,o=e.first,f=o,m,p=null,g=[],M=[],K,Q,q,V;for(V=0;V<l;V+=1){if(K=t[V],Q=s(K,V),q=u.get(Q),q===void 0){var nt=f?f.e.nodes_start:n;p=Er(nt,e,p,p===null?e.first:p.next,K,Q,V,r,i,a),u.set(Q,p),g=[],M=[],f=p.next;continue}if(qi(q,K,V),(q.e.f&pn)!==0&&kr(q.e),q!==f){if(m!==void 0&&m.has(q)){if(g.length<M.length){var st=M[0],P;p=st.prev;var B=g[0],D=g[g.length-1];for(P=0;P<g.length;P+=1)Qn(g[P],st,n);for(P=0;P<M.length;P+=1)m.delete(M[P]);oe(e,B.prev,D.next),oe(e,p,B),oe(e,D,st),f=st,p=D,V-=1,g=[],M=[]}else m.delete(q),Qn(q,f,n),oe(e,q.prev,q.next),oe(e,q,p===null?e.first:p.next),oe(e,p,q),p=q;continue}for(g=[],M=[];f!==null&&f.k!==Q;)(f.e.f&pn)===0&&(m??(m=new Set)).add(f),M.push(f),f=f.next;if(f===null)continue;q=f}g.push(q),p=q,f=q.next}if(f!==null||m!==void 0){for(var c=m===void 0?[]:Mr(m);f!==null;)(f.e.f&pn)===0&&c.push(f),f=f.next;var h=c.length;if(h>0){var _=l===0?n:null;Hi(e,c,_,u)}}Mn.first=e.first&&e.first.e,Mn.last=p&&p.e}function qi(t,e,n,r){mi(t.v,e),t.i=n}function Er(t,e,n,r,i,s,a,l,u,o){var f=(u&wi)!==0,m=(u&bi)===0,p=f?m?Ht(i,!1,!1):Kn(i):i,g=(u&gi)===0?a:Kn(a),M={i:g,v:p,k:s,a:null,e:null,prev:n,next:r};try{return M.e=Ar(()=>l(t,p,g,o),zt),M.e.prev=n&&n.e,M.e.next=r&&r.e,n===null?e.first=M:(n.next=M,n.e.next=M.e),r!==null&&(r.prev=M,r.e.prev=M.e),M}finally{}}function Qn(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==r;){var a=Sr(s);i.before(s),s=a}}function oe(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Bi(t,e,n=!1,r=!1,i=!1){var s=t,a="";ie(()=>{var l=Mn;if(a===(a=e()??"")){zt&&An();return}if(l.nodes_start!==null&&(Ai(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),a!==""){if(zt){ce.data;for(var u=An(),o=u;u!==null&&(u.nodeType!==br||u.data!=="");)o=u,u=Sr(u);if(u===null)throw Mi(),Si;Vn(ce,o),s=Ue(u);return}var f=a+"";n?f=`<svg>${f}</svg>`:r&&(f=`<math>${f}</math>`);var m=Ei(f);if((n||r)&&(m=Ae(m)),Vn(Ae(m),m.lastChild),n||r)for(;Ae(m);)s.before(Ae(m));else s.before(m)}})}const Jn=[...` 	
\r\fÂ \v\uFEFF`];function Gi(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var l=a+s;(a===0||Jn.includes(r[a-1]))&&(l===r.length||Jn.includes(r[l]))?r=(a===0?"":r.substring(0,a))+r.substring(l+1):a=l}}return r===""?null:r}function He(t,e,n,r,i,s){var a=t.__className;if(zt||a!==n||a===void 0){var l=Gi(n,r,s);(!zt||l!==t.getAttribute("class"))&&(l==null?t.removeAttribute("class"):t.className=l),t.__className=n}else if(s&&i!==s)for(var u in s){var o=!!s[u];(i==null||o!==!!i[u])&&t.classList.toggle(u,o)}return s}const Ui=Symbol("is custom element"),Xi=Symbol("is html");function ae(t,e,n,r){var i=Yi(t);zt&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[Ri]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Wi(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Yi(t){return t.__attributes??(t.__attributes={[Ui]:t.nodeName.includes("-"),[Xi]:t.namespaceURI===Ti})}var Zn=new Map;function Wi(t){var e=Zn.get(t.nodeName);if(e)return e;Zn.set(t.nodeName,e=[]);for(var n,r=t,i=Element.prototype;i!==r;){n=Ni(r);for(var s in n)n[s].set&&e.push(s);r=Ci(r)}return e}function Ki(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xe={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Vi=Xe.exports,jn;function Qi(){return jn||(jn=1,function(t,e){((n,r)=>{t.exports=r()})(Vi,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,l={},u=0,o={};function f(c){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(h){var _=P(h);_.chunkSize=parseInt(_.chunkSize),h.step||h.chunk||(_.chunkSize=null),this._handle=new K(_),(this._handle.streamer=this)._config=_}).call(this,c),this.parseChunk=function(h,_){var w=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<w){let T=this._config.newline;T||(A=this._config.quoteChar||'"',T=this._handle.guessLineEndings(h,A)),h=[...h.split(T).slice(w)].join(T)}this.isFirstChunk&&D(this._config.beforeFirstChunk)&&(A=this._config.beforeFirstChunk(h))!==void 0&&(h=A),this.isFirstChunk=!1,this._halted=!1;var w=this._partialLine+h,A=(this._partialLine="",this._handle.parse(w,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(h=A.meta.cursor,w=(this._finished||(this._partialLine=w.substring(h-this._baseIndex),this._baseIndex=h),A&&A.data&&(this._rowCount+=A.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:A,workerId:o.WORKER_ID,finished:w});else if(D(this._config.chunk)&&!_){if(this._config.chunk(A,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=A=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(A.data),this._completeResults.errors=this._completeResults.errors.concat(A.errors),this._completeResults.meta=A.meta),this._completed||!w||!D(this._config.complete)||A&&A.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),w||A&&A.meta.paused||this._nextChunk(),A}this._halted=!0},this._sendError=function(h){D(this._config.error)?this._config.error(h):a&&this._config.error&&r.postMessage({workerId:o.WORKER_ID,error:h,finished:!1})}}function m(c){var h;(c=c||{}).chunkSize||(c.chunkSize=o.RemoteChunkSize),f.call(this,c),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(_){this._input=_,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(h=new XMLHttpRequest,this._config.withCredentials&&(h.withCredentials=this._config.withCredentials),s||(h.onload=B(this._chunkLoaded,this),h.onerror=B(this._chunkError,this)),h.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var _,w=this._config.downloadRequestHeaders;for(_ in w)h.setRequestHeader(_,w[_])}var A;this._config.chunkSize&&(A=this._start+this._config.chunkSize-1,h.setRequestHeader("Range","bytes="+this._start+"-"+A));try{h.send(this._config.downloadRequestBody)}catch(T){this._chunkError(T.message)}s&&h.status===0&&this._chunkError()}},this._chunkLoaded=function(){h.readyState===4&&(h.status<200||400<=h.status?this._chunkError():(this._start+=this._config.chunkSize||h.responseText.length,this._finished=!this._config.chunkSize||this._start>=(_=>(_=_.getResponseHeader("Content-Range"))!==null?parseInt(_.substring(_.lastIndexOf("/")+1)):-1)(h),this.parseChunk(h.responseText)))},this._chunkError=function(_){_=h.statusText||_,this._sendError(new Error(_))}}function p(c){(c=c||{}).chunkSize||(c.chunkSize=o.LocalChunkSize),f.call(this,c);var h,_,w=typeof FileReader<"u";this.stream=function(A){this._input=A,_=A.slice||A.webkitSlice||A.mozSlice,w?((h=new FileReader).onload=B(this._chunkLoaded,this),h.onerror=B(this._chunkError,this)):h=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input,T=(this._config.chunkSize&&(T=Math.min(this._start+this._config.chunkSize,this._input.size),A=_.call(A,this._start,T)),h.readAsText(A,this._config.encoding));w||this._chunkLoaded({target:{result:T}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(h.error)}}function g(c){var h;f.call(this,c=c||{}),this.stream=function(_){return h=_,this._nextChunk()},this._nextChunk=function(){var _,w;if(!this._finished)return _=this._config.chunkSize,h=_?(w=h.substring(0,_),h.substring(_)):(w=h,""),this._finished=!h,this.parseChunk(w)}}function M(c){f.call(this,c=c||{});var h=[],_=!0,w=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){w&&h.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),h.length?this.parseChunk(h.shift()):_=!0},this._streamData=B(function(A){try{h.push(typeof A=="string"?A:A.toString(this._config.encoding)),_&&(_=!1,this._checkIsFinished(),this.parseChunk(h.shift()))}catch(T){this._streamError(T)}},this),this._streamError=B(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=B(function(){this._streamCleanUp(),w=!0,this._streamData("")},this),this._streamCleanUp=B(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function K(c){var h,_,w,A,T=Math.pow(2,53),tt=-T,vt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ht=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,z=this,et=0,R=0,_t=!1,H=!1,W=[],N={data:[],errors:[],meta:{}};function ct(G){return c.skipEmptyLines==="greedy"?G.join("").trim()==="":G.length===1&&G[0].length===0}function ft(){if(N&&w&&(bt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),w=!1),c.skipEmptyLines&&(N.data=N.data.filter(function(O){return!ct(O)})),dt()){let O=function(at,pt){D(c.transformHeader)&&(at=c.transformHeader(at,pt)),W.push(at)};if(N)if(Array.isArray(N.data[0])){for(var G=0;dt()&&G<N.data.length;G++)N.data[G].forEach(O);N.data.splice(0,1)}else N.data.forEach(O)}function Z(O,at){for(var pt=c.header?{}:[],d=0;d<O.length;d++){var x=d,b=O[d],b=((k,y)=>(S=>(c.dynamicTypingFunction&&c.dynamicTyping[S]===void 0&&(c.dynamicTyping[S]=c.dynamicTypingFunction(S)),(c.dynamicTyping[S]||c.dynamicTyping)===!0))(k)?y==="true"||y==="TRUE"||y!=="false"&&y!=="FALSE"&&((S=>{if(vt.test(S)&&(S=parseFloat(S),tt<S&&S<T))return 1})(y)?parseFloat(y):ht.test(y)?new Date(y):y===""?null:y):y)(x=c.header?d>=W.length?"__parsed_extra":W[d]:x,b=c.transform?c.transform(b,x):b);x==="__parsed_extra"?(pt[x]=pt[x]||[],pt[x].push(b)):pt[x]=b}return c.header&&(d>W.length?bt("FieldMismatch","TooManyFields","Too many fields: expected "+W.length+" fields but parsed "+d,R+at):d<W.length&&bt("FieldMismatch","TooFewFields","Too few fields: expected "+W.length+" fields but parsed "+d,R+at)),pt}var rt;N&&(c.header||c.dynamicTyping||c.transform)&&(rt=1,!N.data.length||Array.isArray(N.data[0])?(N.data=N.data.map(Z),rt=N.data.length):N.data=Z(N.data,0),c.header&&N.meta&&(N.meta.fields=W),R+=rt)}function dt(){return c.header&&W.length===0}function bt(G,Z,rt,O){G={type:G,code:Z,message:rt},O!==void 0&&(G.row=O),N.errors.push(G)}D(c.step)&&(A=c.step,c.step=function(G){N=G,dt()?ft():(ft(),N.data.length!==0&&(et+=G.data.length,c.preview&&et>c.preview?_.abort():(N.data=N.data[0],A(N,z))))}),this.parse=function(G,Z,rt){var O=c.quoteChar||'"',O=(c.newline||(c.newline=this.guessLineEndings(G,O)),w=!1,c.delimiter?D(c.delimiter)&&(c.delimiter=c.delimiter(G),N.meta.delimiter=c.delimiter):((O=((at,pt,d,x,b)=>{var k,y,S,I;b=b||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var U=0;U<b.length;U++){for(var C,$=b[U],E=0,X=0,F=0,L=(S=void 0,new q({comments:x,delimiter:$,newline:pt,preview:10}).parse(at)),lt=0;lt<L.data.length;lt++)d&&ct(L.data[lt])?F++:(C=L.data[lt].length,X+=C,S===void 0?S=C:0<C&&(E+=Math.abs(C-S),S=C));0<L.data.length&&(X/=L.data.length-F),(y===void 0||E<=y)&&(I===void 0||I<X)&&1.99<X&&(y=E,k=$,I=X)}return{successful:!!(c.delimiter=k),bestDelimiter:k}})(G,c.newline,c.skipEmptyLines,c.comments,c.delimitersToGuess)).successful?c.delimiter=O.bestDelimiter:(w=!0,c.delimiter=o.DefaultDelimiter),N.meta.delimiter=c.delimiter),P(c));return c.preview&&c.header&&O.preview++,h=G,_=new q(O),N=_.parse(h,Z,rt),ft(),_t?{meta:{paused:!0}}:N||{meta:{paused:!1}}},this.paused=function(){return _t},this.pause=function(){_t=!0,_.abort(),h=D(c.chunk)?"":h.substring(_.getCharIndex())},this.resume=function(){z.streamer._halted?(_t=!1,z.streamer.parseChunk(h,!0)):setTimeout(z.resume,3)},this.aborted=function(){return H},this.abort=function(){H=!0,_.abort(),N.meta.aborted=!0,D(c.complete)&&c.complete(N),h=""},this.guessLineEndings=function(at,O){at=at.substring(0,1048576);var O=new RegExp(Q(O)+"([^]*?)"+Q(O),"gm"),rt=(at=at.replace(O,"")).split("\r"),O=at.split(`
`),at=1<O.length&&O[0].length<rt[0].length;if(rt.length===1||at)return`
`;for(var pt=0,d=0;d<rt.length;d++)rt[d][0]===`
`&&pt++;return pt>=rt.length/2?`\r
`:"\r"}}function Q(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(c){var h=(c=c||{}).delimiter,_=c.newline,w=c.comments,A=c.step,T=c.preview,tt=c.fastMode,vt=null,ht=!1,z=c.quoteChar==null?'"':c.quoteChar,et=z;if(c.escapeChar!==void 0&&(et=c.escapeChar),(typeof h!="string"||-1<o.BAD_DELIMITERS.indexOf(h))&&(h=","),w===h)throw new Error("Comment character same as delimiter");w===!0?w="#":(typeof w!="string"||-1<o.BAD_DELIMITERS.indexOf(w))&&(w=!1),_!==`
`&&_!=="\r"&&_!==`\r
`&&(_=`
`);var R=0,_t=!1;this.parse=function(H,W,N){if(typeof H!="string")throw new Error("Input must be a string");var ct=H.length,ft=h.length,dt=_.length,bt=w.length,G=D(A),Z=[],rt=[],O=[],at=R=0;if(!H)return E();if(tt||tt!==!1&&H.indexOf(z)===-1){for(var pt=H.split(_),d=0;d<pt.length;d++){if(O=pt[d],R+=O.length,d!==pt.length-1)R+=_.length;else if(N)return E();if(!w||O.substring(0,bt)!==w){if(G){if(Z=[],I(O.split(h)),X(),_t)return E()}else I(O.split(h));if(T&&T<=d)return Z=Z.slice(0,T),E(!0)}}return E()}for(var x=H.indexOf(h,R),b=H.indexOf(_,R),k=new RegExp(Q(et)+Q(z),"g"),y=H.indexOf(z,R);;)if(H[R]===z)for(y=R,R++;;){if((y=H.indexOf(z,y+1))===-1)return N||rt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Z.length,index:R}),C();if(y===ct-1)return C(H.substring(R,y).replace(k,z));if(z===et&&H[y+1]===et)y++;else if(z===et||y===0||H[y-1]!==et){x!==-1&&x<y+1&&(x=H.indexOf(h,y+1));var S=U((b=b!==-1&&b<y+1?H.indexOf(_,y+1):b)===-1?x:Math.min(x,b));if(H.substr(y+1+S,ft)===h){O.push(H.substring(R,y).replace(k,z)),H[R=y+1+S+ft]!==z&&(y=H.indexOf(z,R)),x=H.indexOf(h,R),b=H.indexOf(_,R);break}if(S=U(b),H.substring(y+1+S,y+1+S+dt)===_){if(O.push(H.substring(R,y).replace(k,z)),$(y+1+S+dt),x=H.indexOf(h,R),y=H.indexOf(z,R),G&&(X(),_t))return E();if(T&&Z.length>=T)return E(!0);break}rt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Z.length,index:R}),y++}}else if(w&&O.length===0&&H.substring(R,R+bt)===w){if(b===-1)return E();R=b+dt,b=H.indexOf(_,R),x=H.indexOf(h,R)}else if(x!==-1&&(x<b||b===-1))O.push(H.substring(R,x)),R=x+ft,x=H.indexOf(h,R);else{if(b===-1)break;if(O.push(H.substring(R,b)),$(b+dt),G&&(X(),_t))return E();if(T&&Z.length>=T)return E(!0)}return C();function I(F){Z.push(F),at=R}function U(F){var L=0;return L=F!==-1&&(F=H.substring(y+1,F))&&F.trim()===""?F.length:L}function C(F){return N||(F===void 0&&(F=H.substring(R)),O.push(F),R=ct,I(O),G&&X()),E()}function $(F){R=F,I(O),O=[],b=H.indexOf(_,R)}function E(F){if(c.header&&!W&&Z.length&&!ht){var L=Z[0],lt=Object.create(null),it=new Set(L);let Rt=!1;for(let St=0;St<L.length;St++){let ot=L[St];if(lt[ot=D(c.transformHeader)?c.transformHeader(ot,St):ot]){let kt,$t=lt[ot];for(;kt=ot+"_"+$t,$t++,it.has(kt););it.add(kt),L[St]=kt,lt[ot]++,Rt=!0,(vt=vt===null?{}:vt)[kt]=ot}else lt[ot]=1,L[St]=ot;it.add(ot)}Rt&&console.warn("Duplicate headers found and renamed."),ht=!0}return{data:Z,errors:rt,meta:{delimiter:h,linebreak:_,aborted:_t,truncated:!!F,cursor:at+(W||0),renamedHeaders:vt}}}function X(){A(E()),Z=[],rt=[]}},this.abort=function(){_t=!0},this.getCharIndex=function(){return R}}function V(c){var h=c.data,_=l[h.workerId],w=!1;if(h.error)_.userError(h.error,h.file);else if(h.results&&h.results.data){var A={abort:function(){w=!0,nt(h.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:st,resume:st};if(D(_.userStep)){for(var T=0;T<h.results.data.length&&(_.userStep({data:h.results.data[T],errors:h.results.errors,meta:h.results.meta},A),!w);T++);delete h.results}else D(_.userChunk)&&(_.userChunk(h.results,A,h.file),delete h.results)}h.finished&&!w&&nt(h.workerId,h.results)}function nt(c,h){var _=l[c];D(_.userComplete)&&_.userComplete(h),_.terminate(),delete l[c]}function st(){throw new Error("Not implemented.")}function P(c){if(typeof c!="object"||c===null)return c;var h,_=Array.isArray(c)?[]:{};for(h in c)_[h]=P(c[h]);return _}function B(c,h){return function(){c.apply(h,arguments)}}function D(c){return typeof c=="function"}return o.parse=function(c,h){var _=(h=h||{}).dynamicTyping||!1;if(D(_)&&(h.dynamicTypingFunction=_,_={}),h.dynamicTyping=_,h.transform=!!D(h.transform)&&h.transform,!h.worker||!o.WORKERS_SUPPORTED)return _=null,o.NODE_STREAM_INPUT,typeof c=="string"?(c=(w=>w.charCodeAt(0)!==65279?w:w.slice(1))(c),_=new(h.download?m:g)(h)):c.readable===!0&&D(c.read)&&D(c.on)?_=new M(h):(r.File&&c instanceof File||c instanceof Object)&&(_=new p(h)),_.stream(c);(_=(()=>{var w;return!!o.WORKERS_SUPPORTED&&(w=(()=>{var A=r.URL||r.webkitURL||null,T=n.toString();return o.BLOB_URL||(o.BLOB_URL=A.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",T,")();"],{type:"text/javascript"})))})(),(w=new r.Worker(w)).onmessage=V,w.id=u++,l[w.id]=w)})()).userStep=h.step,_.userChunk=h.chunk,_.userComplete=h.complete,_.userError=h.error,h.step=D(h.step),h.chunk=D(h.chunk),h.complete=D(h.complete),h.error=D(h.error),delete h.worker,_.postMessage({input:c,config:h,workerId:_.id})},o.unparse=function(c,h){var _=!1,w=!0,A=",",T=`\r
`,tt='"',vt=tt+tt,ht=!1,z=null,et=!1,R=((()=>{if(typeof h=="object"){if(typeof h.delimiter!="string"||o.BAD_DELIMITERS.filter(function(W){return h.delimiter.indexOf(W)!==-1}).length||(A=h.delimiter),typeof h.quotes!="boolean"&&typeof h.quotes!="function"&&!Array.isArray(h.quotes)||(_=h.quotes),typeof h.skipEmptyLines!="boolean"&&typeof h.skipEmptyLines!="string"||(ht=h.skipEmptyLines),typeof h.newline=="string"&&(T=h.newline),typeof h.quoteChar=="string"&&(tt=h.quoteChar),typeof h.header=="boolean"&&(w=h.header),Array.isArray(h.columns)){if(h.columns.length===0)throw new Error("Option columns is empty");z=h.columns}h.escapeChar!==void 0&&(vt=h.escapeChar+tt),h.escapeFormulae instanceof RegExp?et=h.escapeFormulae:typeof h.escapeFormulae=="boolean"&&h.escapeFormulae&&(et=/^[=+\-@\t\r].*$/)}})(),new RegExp(Q(tt),"g"));if(typeof c=="string"&&(c=JSON.parse(c)),Array.isArray(c)){if(!c.length||Array.isArray(c[0]))return _t(null,c,ht);if(typeof c[0]=="object")return _t(z||Object.keys(c[0]),c,ht)}else if(typeof c=="object")return typeof c.data=="string"&&(c.data=JSON.parse(c.data)),Array.isArray(c.data)&&(c.fields||(c.fields=c.meta&&c.meta.fields||z),c.fields||(c.fields=Array.isArray(c.data[0])?c.fields:typeof c.data[0]=="object"?Object.keys(c.data[0]):[]),Array.isArray(c.data[0])||typeof c.data[0]=="object"||(c.data=[c.data])),_t(c.fields||[],c.data||[],ht);throw new Error("Unable to serialize unrecognized input");function _t(W,N,ct){var ft="",dt=(typeof W=="string"&&(W=JSON.parse(W)),typeof N=="string"&&(N=JSON.parse(N)),Array.isArray(W)&&0<W.length),bt=!Array.isArray(N[0]);if(dt&&w){for(var G=0;G<W.length;G++)0<G&&(ft+=A),ft+=H(W[G],G);0<N.length&&(ft+=T)}for(var Z=0;Z<N.length;Z++){var rt=(dt?W:N[Z]).length,O=!1,at=dt?Object.keys(N[Z]).length===0:N[Z].length===0;if(ct&&!dt&&(O=ct==="greedy"?N[Z].join("").trim()==="":N[Z].length===1&&N[Z][0].length===0),ct==="greedy"&&dt){for(var pt=[],d=0;d<rt;d++){var x=bt?W[d]:d;pt.push(N[Z][x])}O=pt.join("").trim()===""}if(!O){for(var b=0;b<rt;b++){0<b&&!at&&(ft+=A);var k=dt&&bt?W[b]:b;ft+=H(N[Z][k],b)}Z<N.length-1&&(!ct||0<rt&&!at)&&(ft+=T)}}return ft}function H(W,N){var ct,ft;return W==null?"":W.constructor===Date?JSON.stringify(W).slice(1,25):(ft=!1,et&&typeof W=="string"&&et.test(W)&&(W="'"+W,ft=!0),ct=W.toString().replace(R,vt),(ft=ft||_===!0||typeof _=="function"&&_(W,N)||Array.isArray(_)&&_[N]||((dt,bt)=>{for(var G=0;G<bt.length;G++)if(-1<dt.indexOf(bt[G]))return!0;return!1})(ct,o.BAD_DELIMITERS)||-1<ct.indexOf(A)||ct.charAt(0)===" "||ct.charAt(ct.length-1)===" ")?tt+ct+tt:ct)}},o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!s&&!!r.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=q,o.ParserHandle=K,o.NetworkStreamer=m,o.FileStreamer=p,o.StringStreamer=g,o.ReadableStreamStreamer=M,r.jQuery&&((i=r.jQuery).fn.parse=function(c){var h=c.config||{},_=[];return this.each(function(T){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var tt=0;tt<this.files.length;tt++)_.push({file:this.files[tt],inputElem:this,instanceConfig:i.extend({},h)})}),w(),this;function w(){if(_.length===0)D(c.complete)&&c.complete();else{var T,tt,vt,ht,z=_[0];if(D(c.before)){var et=c.before(z.file,z.inputElem);if(typeof et=="object"){if(et.action==="abort")return T="AbortError",tt=z.file,vt=z.inputElem,ht=et.reason,void(D(c.error)&&c.error({name:T},tt,vt,ht));if(et.action==="skip")return void A();typeof et.config=="object"&&(z.instanceConfig=i.extend(z.instanceConfig,et.config))}else if(et==="skip")return void A()}var R=z.instanceConfig.complete;z.instanceConfig.complete=function(_t){D(R)&&R(_t,z.file,z.inputElem),A()},o.parse(z.file,z.instanceConfig)}}function A(){_.splice(0,1),w()}}),a&&(r.onmessage=function(c){c=c.data,o.WORKER_ID===void 0&&c&&(o.WORKER_ID=c.workerId),typeof c.input=="string"?r.postMessage({workerId:o.WORKER_ID,results:o.parse(c.input,c.config),finished:!0}):(r.File&&c.input instanceof File||c.input instanceof Object)&&(c=o.parse(c.input,c.config))&&r.postMessage({workerId:o.WORKER_ID,results:c,finished:!0})}),(m.prototype=Object.create(f.prototype)).constructor=m,(p.prototype=Object.create(f.prototype)).constructor=p,(g.prototype=Object.create(g.prototype)).constructor=g,(M.prototype=Object.create(f.prototype)).constructor=M,o})}(Xe)),Xe.exports}var Ji=Qi();const Zi=Ki(Ji);function Ye(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ji(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Tr(t){let e,n,r;t.length!==2?(e=Ye,n=(l,u)=>Ye(t(l),u),r=(l,u)=>t(l)-u):(e=t===Ye||t===ji?t:ts,n=t,r=t);function i(l,u,o=0,f=l.length){if(o<f){if(e(u,u)!==0)return f;do{const m=o+f>>>1;n(l[m],u)<0?o=m+1:f=m}while(o<f)}return o}function s(l,u,o=0,f=l.length){if(o<f){if(e(u,u)!==0)return f;do{const m=o+f>>>1;n(l[m],u)<=0?o=m+1:f=m}while(o<f)}return o}function a(l,u,o=0,f=l.length){const m=i(l,u,o,f-1);return m>o&&r(l[m-1],u)>-r(l[m],u)?m-1:m}return{left:i,center:a,right:s}}function ts(){return 0}function es(t){return t===null?NaN:+t}const ns=Tr(Ye),rs=ns.right;Tr(es).center;const is=Math.sqrt(50),ss=Math.sqrt(10),as=Math.sqrt(2);function Qe(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=is?10:s>=ss?5:s>=as?2:1;let l,u,o;return i<0?(o=Math.pow(10,-i)/a,l=Math.round(t*o),u=Math.round(e*o),l/o<t&&++l,u/o>e&&--u,o=-o):(o=Math.pow(10,i)*a,l=Math.round(t/o),u=Math.round(e/o),l*o<t&&++l,u*o>e&&--u),u<l&&.5<=n&&n<2?Qe(t,e,n*2):[l,u,o]}function os(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?Qe(e,t,n):Qe(t,e,n);if(!(s>=i))return[];const l=s-i+1,u=new Array(l);if(r)if(a<0)for(let o=0;o<l;++o)u[o]=(s-o)/-a;else for(let o=0;o<l;++o)u[o]=(s-o)*a;else if(a<0)for(let o=0;o<l;++o)u[o]=(i+o)/-a;else for(let o=0;o<l;++o)u[o]=(i+o)*a;return u}function Sn(t,e,n){return e=+e,t=+t,n=+n,Qe(t,e,n)[2]}function ls(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Sn(e,t,n):Sn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function us(t){return t}var xn=1,wn=2,En=3,Me=4,tr=1e-6;function cs(t){return"translate("+t+",0)"}function fs(t){return"translate(0,"+t+")"}function hs(t){return e=>+t(e)}function ds(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ps(){return!this.__axis}function Cr(t,e){var n=[],r=null,i=null,s=6,a=6,l=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,o=t===xn||t===Me?-1:1,f=t===Me||t===wn?"x":"y",m=t===xn||t===En?cs:fs;function p(g){var M=r??(e.ticks?e.ticks.apply(e,n):e.domain()),K=i??(e.tickFormat?e.tickFormat.apply(e,n):us),Q=Math.max(s,0)+l,q=e.range(),V=+q[0]+u,nt=+q[q.length-1]+u,st=(e.bandwidth?ds:hs)(e.copy(),u),P=g.selection?g.selection():g,B=P.selectAll(".domain").data([null]),D=P.selectAll(".tick").data(M,e).order(),c=D.exit(),h=D.enter().append("g").attr("class","tick"),_=D.select("line"),w=D.select("text");B=B.merge(B.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),D=D.merge(h),_=_.merge(h.append("line").attr("stroke","currentColor").attr(f+"2",o*s)),w=w.merge(h.append("text").attr("fill","currentColor").attr(f,o*Q).attr("dy",t===xn?"0em":t===En?"0.71em":"0.32em")),g!==P&&(B=B.transition(g),D=D.transition(g),_=_.transition(g),w=w.transition(g),c=c.transition(g).attr("opacity",tr).attr("transform",function(A){return isFinite(A=st(A))?m(A+u):this.getAttribute("transform")}),h.attr("opacity",tr).attr("transform",function(A){var T=this.parentNode.__axis;return m((T&&isFinite(T=T(A))?T:st(A))+u)})),c.remove(),B.attr("d",t===Me||t===wn?a?"M"+o*a+","+V+"H"+u+"V"+nt+"H"+o*a:"M"+u+","+V+"V"+nt:a?"M"+V+","+o*a+"V"+u+"H"+nt+"V"+o*a:"M"+V+","+u+"H"+nt),D.attr("opacity",1).attr("transform",function(A){return m(st(A)+u)}),_.attr(f+"2",o*s),w.attr(f,o*Q).text(K),P.filter(ps).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===wn?"start":t===Me?"end":"middle"),P.each(function(){this.__axis=st})}return p.scale=function(g){return arguments.length?(e=g,p):e},p.ticks=function(){return n=Array.from(arguments),p},p.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),p):n.slice()},p.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),p):r&&r.slice()},p.tickFormat=function(g){return arguments.length?(i=g,p):i},p.tickSize=function(g){return arguments.length?(s=a=+g,p):s},p.tickSizeInner=function(g){return arguments.length?(s=+g,p):s},p.tickSizeOuter=function(g){return arguments.length?(a=+g,p):a},p.tickPadding=function(g){return arguments.length?(l=+g,p):l},p.offset=function(g){return arguments.length?(u=+g,p):u},p}function ms(t){return Cr(En,t)}function gs(t){return Cr(Me,t)}var vs={value:()=>{}};function Nr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new We(n)}function We(t){this._=t}function ys(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}We.prototype=Nr.prototype={constructor:We,on:function(t,e){var n=this._,r=ys(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=_s(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=er(n[i],t.name,e);else if(e==null)for(i in n)n[i]=er(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new We(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function _s(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function er(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=vs,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Tn="http://www.w3.org/1999/xhtml";const nr={svg:"http://www.w3.org/2000/svg",xhtml:Tn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function on(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),nr.hasOwnProperty(e)?{space:nr[e],local:t}:t}function xs(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Tn&&e.documentElement.namespaceURI===Tn?e.createElement(t):e.createElementNS(n,t)}}function ws(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Rr(t){var e=on(t);return(e.local?ws:xs)(e)}function bs(){}function Ln(t){return t==null?bs:function(){return this.querySelector(t)}}function ks(t){typeof t!="function"&&(t=Ln(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,l=r[i]=new Array(a),u,o,f=0;f<a;++f)(u=s[f])&&(o=t.call(u,u.__data__,f,s))&&("__data__"in u&&(o.__data__=u.__data__),l[f]=o);return new Dt(r,this._parents)}function As(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ms(){return[]}function $r(t){return t==null?Ms:function(){return this.querySelectorAll(t)}}function Ss(t){return function(){return As(t.apply(this,arguments))}}function Es(t){typeof t=="function"?t=Ss(t):t=$r(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],l=a.length,u,o=0;o<l;++o)(u=a[o])&&(r.push(t.call(u,u.__data__,o,a)),i.push(u));return new Dt(r,i)}function Ir(t){return function(){return this.matches(t)}}function Dr(t){return function(e){return e.matches(t)}}var Ts=Array.prototype.find;function Cs(t){return function(){return Ts.call(this.children,t)}}function Ns(){return this.firstElementChild}function Rs(t){return this.select(t==null?Ns:Cs(typeof t=="function"?t:Dr(t)))}var $s=Array.prototype.filter;function Is(){return Array.from(this.children)}function Ds(t){return function(){return $s.call(this.children,t)}}function Os(t){return this.selectAll(t==null?Is:Ds(typeof t=="function"?t:Dr(t)))}function Fs(t){typeof t!="function"&&(t=Ir(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,l=r[i]=[],u,o=0;o<a;++o)(u=s[o])&&t.call(u,u.__data__,o,s)&&l.push(u);return new Dt(r,this._parents)}function Or(t){return new Array(t.length)}function Ls(){return new Dt(this._enter||this._groups.map(Or),this._parents)}function Je(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Je.prototype={constructor:Je,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ps(t){return function(){return t}}function Hs(t,e,n,r,i,s){for(var a=0,l,u=e.length,o=s.length;a<o;++a)(l=e[a])?(l.__data__=s[a],r[a]=l):n[a]=new Je(t,s[a]);for(;a<u;++a)(l=e[a])&&(i[a]=l)}function zs(t,e,n,r,i,s,a){var l,u,o=new Map,f=e.length,m=s.length,p=new Array(f),g;for(l=0;l<f;++l)(u=e[l])&&(p[l]=g=a.call(u,u.__data__,l,e)+"",o.has(g)?i[l]=u:o.set(g,u));for(l=0;l<m;++l)g=a.call(t,s[l],l,s)+"",(u=o.get(g))?(r[l]=u,u.__data__=s[l],o.delete(g)):n[l]=new Je(t,s[l]);for(l=0;l<f;++l)(u=e[l])&&o.get(p[l])===u&&(i[l]=u)}function qs(t){return t.__data__}function Bs(t,e){if(!arguments.length)return Array.from(this,qs);var n=e?zs:Hs,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ps(t));for(var s=i.length,a=new Array(s),l=new Array(s),u=new Array(s),o=0;o<s;++o){var f=r[o],m=i[o],p=m.length,g=Gs(t.call(f,f&&f.__data__,o,r)),M=g.length,K=l[o]=new Array(M),Q=a[o]=new Array(M),q=u[o]=new Array(p);n(f,m,K,Q,q,g,e);for(var V=0,nt=0,st,P;V<M;++V)if(st=K[V]){for(V>=nt&&(nt=V+1);!(P=Q[nt])&&++nt<M;);st._next=P||null}}return a=new Dt(a,r),a._enter=l,a._exit=u,a}function Gs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Us(){return new Dt(this._exit||this._groups.map(Or),this._parents)}function Xs(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Ys(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),l=new Array(i),u=0;u<a;++u)for(var o=n[u],f=r[u],m=o.length,p=l[u]=new Array(m),g,M=0;M<m;++M)(g=o[M]||f[M])&&(p[M]=g);for(;u<i;++u)l[u]=n[u];return new Dt(l,this._parents)}function Ws(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Ks(t){t||(t=Vs);function e(m,p){return m&&p?t(m.__data__,p.__data__):!m-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],l=a.length,u=i[s]=new Array(l),o,f=0;f<l;++f)(o=a[f])&&(u[f]=o);u.sort(e)}return new Dt(i,this._parents).order()}function Vs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Qs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Js(){return Array.from(this)}function Zs(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function js(){let t=0;for(const e of this)++t;return t}function ta(){return!this.node()}function ea(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,l;s<a;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function na(t){return function(){this.removeAttribute(t)}}function ra(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ia(t,e){return function(){this.setAttribute(t,e)}}function sa(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function aa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function oa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function la(t,e){var n=on(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ra:na:typeof e=="function"?n.local?oa:aa:n.local?sa:ia)(n,e))}function Fr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ua(t){return function(){this.style.removeProperty(t)}}function ca(t,e,n){return function(){this.style.setProperty(t,e,n)}}function fa(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ha(t,e,n){return arguments.length>1?this.each((e==null?ua:typeof e=="function"?fa:ca)(t,e,n??"")):ye(this.node(),t)}function ye(t,e){return t.style.getPropertyValue(e)||Fr(t).getComputedStyle(t,null).getPropertyValue(e)}function da(t){return function(){delete this[t]}}function pa(t,e){return function(){this[t]=e}}function ma(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ga(t,e){return arguments.length>1?this.each((e==null?da:typeof e=="function"?ma:pa)(t,e)):this.node()[t]}function Lr(t){return t.trim().split(/^|\s+/)}function Pn(t){return t.classList||new Pr(t)}function Pr(t){this._node=t,this._names=Lr(t.getAttribute("class")||"")}Pr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Hr(t,e){for(var n=Pn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function zr(t,e){for(var n=Pn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function va(t){return function(){Hr(this,t)}}function ya(t){return function(){zr(this,t)}}function _a(t,e){return function(){(e.apply(this,arguments)?Hr:zr)(this,t)}}function xa(t,e){var n=Lr(t+"");if(arguments.length<2){for(var r=Pn(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?_a:e?va:ya)(n,e))}function wa(){this.textContent=""}function ba(t){return function(){this.textContent=t}}function ka(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Aa(t){return arguments.length?this.each(t==null?wa:(typeof t=="function"?ka:ba)(t)):this.node().textContent}function Ma(){this.innerHTML=""}function Sa(t){return function(){this.innerHTML=t}}function Ea(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ta(t){return arguments.length?this.each(t==null?Ma:(typeof t=="function"?Ea:Sa)(t)):this.node().innerHTML}function Ca(){this.nextSibling&&this.parentNode.appendChild(this)}function Na(){return this.each(Ca)}function Ra(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $a(){return this.each(Ra)}function Ia(t){var e=typeof t=="function"?t:Rr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Da(){return null}function Oa(t,e){var n=typeof t=="function"?t:Rr(t),r=e==null?Da:typeof e=="function"?e:Ln(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Fa(){var t=this.parentNode;t&&t.removeChild(this)}function La(){return this.each(Fa)}function Pa(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ha(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function za(t){return this.select(t?Ha:Pa)}function qa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ba(t){return function(e){t.call(this,e,this.__data__)}}function Ga(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ua(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Xa(t,e,n){return function(){var r=this.__on,i,s=Ba(e);if(r){for(var a=0,l=r.length;a<l;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Ya(t,e,n){var r=Ga(t+""),i,s=r.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,o=l.length,f;u<o;++u)for(i=0,f=l[u];i<s;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=e?Xa:Ua,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function qr(t,e,n){var r=Fr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Wa(t,e){return function(){return qr(this,t,e)}}function Ka(t,e){return function(){return qr(this,t,e.apply(this,arguments))}}function Va(t,e){return this.each((typeof e=="function"?Ka:Wa)(t,e))}function*Qa(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var Br=[null];function Dt(t,e){this._groups=t,this._parents=e}function $e(){return new Dt([[document.documentElement]],Br)}function Ja(){return this}Dt.prototype=$e.prototype={constructor:Dt,select:ks,selectAll:Es,selectChild:Rs,selectChildren:Os,filter:Fs,data:Bs,enter:Ls,exit:Us,join:Xs,merge:Ys,selection:Ja,order:Ws,sort:Ks,call:Qs,nodes:Js,node:Zs,size:js,empty:ta,each:ea,attr:la,style:ha,property:ga,classed:xa,text:Aa,html:Ta,raise:Na,lower:$a,append:Ia,insert:Oa,remove:La,clone:za,datum:qa,on:Ya,dispatch:Va,[Symbol.iterator]:Qa};function Za(t){return typeof t=="string"?new Dt([[document.querySelector(t)]],[document.documentElement]):new Dt([[t]],Br)}function Hn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Gr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ie(){}var Ce=.7,Ze=1/Ce,ve="\\s*([+-]?\\d+)\\s*",Ne="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ja=/^#([0-9a-f]{3,8})$/,to=new RegExp(`^rgb\\(${ve},${ve},${ve}\\)$`),eo=new RegExp(`^rgb\\(${Vt},${Vt},${Vt}\\)$`),no=new RegExp(`^rgba\\(${ve},${ve},${ve},${Ne}\\)$`),ro=new RegExp(`^rgba\\(${Vt},${Vt},${Vt},${Ne}\\)$`),io=new RegExp(`^hsl\\(${Ne},${Vt},${Vt}\\)$`),so=new RegExp(`^hsla\\(${Ne},${Vt},${Vt},${Ne}\\)$`),rr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hn(Ie,pe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ir,formatHex:ir,formatHex8:ao,formatHsl:oo,formatRgb:sr,toString:sr});function ir(){return this.rgb().formatHex()}function ao(){return this.rgb().formatHex8()}function oo(){return Ur(this).formatHsl()}function sr(){return this.rgb().formatRgb()}function pe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ja.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ar(e):n===3?new Nt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ze(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ze(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=to.exec(t))?new Nt(e[1],e[2],e[3],1):(e=eo.exec(t))?new Nt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=no.exec(t))?ze(e[1],e[2],e[3],e[4]):(e=ro.exec(t))?ze(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=io.exec(t))?ur(e[1],e[2]/100,e[3]/100,1):(e=so.exec(t))?ur(e[1],e[2]/100,e[3]/100,e[4]):rr.hasOwnProperty(t)?ar(rr[t]):t==="transparent"?new Nt(NaN,NaN,NaN,0):null}function ar(t){return new Nt(t>>16&255,t>>8&255,t&255,1)}function ze(t,e,n,r){return r<=0&&(t=e=n=NaN),new Nt(t,e,n,r)}function lo(t){return t instanceof Ie||(t=pe(t)),t?(t=t.rgb(),new Nt(t.r,t.g,t.b,t.opacity)):new Nt}function Cn(t,e,n,r){return arguments.length===1?lo(t):new Nt(t,e,n,r??1)}function Nt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Hn(Nt,Cn,Gr(Ie,{brighter(t){return t=t==null?Ze:Math.pow(Ze,t),new Nt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ce:Math.pow(Ce,t),new Nt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Nt(de(this.r),de(this.g),de(this.b),je(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:or,formatHex:or,formatHex8:uo,formatRgb:lr,toString:lr}));function or(){return`#${fe(this.r)}${fe(this.g)}${fe(this.b)}`}function uo(){return`#${fe(this.r)}${fe(this.g)}${fe(this.b)}${fe((isNaN(this.opacity)?1:this.opacity)*255)}`}function lr(){const t=je(this.opacity);return`${t===1?"rgb(":"rgba("}${de(this.r)}, ${de(this.g)}, ${de(this.b)}${t===1?")":`, ${t})`}`}function je(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function de(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fe(t){return t=de(t),(t<16?"0":"")+t.toString(16)}function ur(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Gt(t,e,n,r)}function Ur(t){if(t instanceof Gt)return new Gt(t.h,t.s,t.l,t.opacity);if(t instanceof Ie||(t=pe(t)),!t)return new Gt;if(t instanceof Gt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,l=s-i,u=(s+i)/2;return l?(e===s?a=(n-r)/l+(n<r)*6:n===s?a=(r-e)/l+2:a=(e-n)/l+4,l/=u<.5?s+i:2-s-i,a*=60):l=u>0&&u<1?0:a,new Gt(a,l,u,t.opacity)}function co(t,e,n,r){return arguments.length===1?Ur(t):new Gt(t,e,n,r??1)}function Gt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Hn(Gt,co,Gr(Ie,{brighter(t){return t=t==null?Ze:Math.pow(Ze,t),new Gt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ce:Math.pow(Ce,t),new Gt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Nt(bn(t>=240?t-240:t+120,i,r),bn(t,i,r),bn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Gt(cr(this.h),qe(this.s),qe(this.l),je(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=je(this.opacity);return`${t===1?"hsl(":"hsla("}${cr(this.h)}, ${qe(this.s)*100}%, ${qe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function cr(t){return t=(t||0)%360,t<0?t+360:t}function qe(t){return Math.max(0,Math.min(1,t||0))}function bn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const zn=t=>()=>t;function fo(t,e){return function(n){return t+n*e}}function ho(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function po(t){return(t=+t)==1?Xr:function(e,n){return n-e?ho(e,n,t):zn(isNaN(e)?n:e)}}function Xr(t,e){var n=e-t;return n?fo(t,n):zn(isNaN(t)?e:t)}const tn=function t(e){var n=po(e);function r(i,s){var a=n((i=Cn(i)).r,(s=Cn(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),o=Xr(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=o(f),i+""}}return r.gamma=t,r}(1);function mo(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function go(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vo(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=he(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(l){for(a=0;a<r;++a)s[a]=i[a](l);return s}}function yo(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Bt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function _o(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=he(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Nn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kn=new RegExp(Nn.source,"g");function xo(t){return function(){return t}}function wo(t){return function(e){return t(e)+""}}function Yr(t,e){var n=Nn.lastIndex=kn.lastIndex=0,r,i,s,a=-1,l=[],u=[];for(t=t+"",e=e+"";(r=Nn.exec(t))&&(i=kn.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:Bt(r,i)})),n=kn.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?wo(u[0].x):xo(e):(e=u.length,function(o){for(var f=0,m;f<e;++f)l[(m=u[f]).i]=m.x(o);return l.join("")})}function he(t,e){var n=typeof e,r;return e==null||n==="boolean"?zn(e):(n==="number"?Bt:n==="string"?(r=pe(e))?(e=r,tn):Yr:e instanceof pe?tn:e instanceof Date?yo:go(e)?mo:Array.isArray(e)?vo:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?_o:Bt)(t,e)}function bo(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var fr=180/Math.PI,Rn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wr(t,e,n,r,i,s){var a,l,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*fr,skewX:Math.atan(u)*fr,scaleX:a,scaleY:l}}var Be;function ko(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Rn:Wr(e.a,e.b,e.c,e.d,e.e,e.f)}function Ao(t){return t==null||(Be||(Be=document.createElementNS("http://www.w3.org/2000/svg","g")),Be.setAttribute("transform",t),!(t=Be.transform.baseVal.consolidate()))?Rn:(t=t.matrix,Wr(t.a,t.b,t.c,t.d,t.e,t.f))}function Kr(t,e,n,r){function i(o){return o.length?o.pop()+" ":""}function s(o,f,m,p,g,M){if(o!==m||f!==p){var K=g.push("translate(",null,e,null,n);M.push({i:K-4,x:Bt(o,m)},{i:K-2,x:Bt(f,p)})}else(m||p)&&g.push("translate("+m+e+p+n)}function a(o,f,m,p){o!==f?(o-f>180?f+=360:f-o>180&&(o+=360),p.push({i:m.push(i(m)+"rotate(",null,r)-2,x:Bt(o,f)})):f&&m.push(i(m)+"rotate("+f+r)}function l(o,f,m,p){o!==f?p.push({i:m.push(i(m)+"skewX(",null,r)-2,x:Bt(o,f)}):f&&m.push(i(m)+"skewX("+f+r)}function u(o,f,m,p,g,M){if(o!==m||f!==p){var K=g.push(i(g)+"scale(",null,",",null,")");M.push({i:K-4,x:Bt(o,m)},{i:K-2,x:Bt(f,p)})}else(m!==1||p!==1)&&g.push(i(g)+"scale("+m+","+p+")")}return function(o,f){var m=[],p=[];return o=t(o),f=t(f),s(o.translateX,o.translateY,f.translateX,f.translateY,m,p),a(o.rotate,f.rotate,m,p),l(o.skewX,f.skewX,m,p),u(o.scaleX,o.scaleY,f.scaleX,f.scaleY,m,p),o=f=null,function(g){for(var M=-1,K=p.length,Q;++M<K;)m[(Q=p[M]).i]=Q.x(g);return m.join("")}}}var Mo=Kr(ko,"px, ","px)","deg)"),So=Kr(Ao,", ",")",")"),_e=0,Se=0,ke=0,Vr=1e3,en,Ee,nn=0,me=0,ln=0,Re=typeof performance=="object"&&performance.now?performance:Date,Qr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qn(){return me||(Qr(Eo),me=Re.now()+ln)}function Eo(){me=0}function rn(){this._call=this._time=this._next=null}rn.prototype=Jr.prototype={constructor:rn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?qn():+n)+(e==null?0:+e),!this._next&&Ee!==this&&(Ee?Ee._next=this:en=this,Ee=this),this._call=t,this._time=n,$n()},stop:function(){this._call&&(this._call=null,this._time=1/0,$n())}};function Jr(t,e,n){var r=new rn;return r.restart(t,e,n),r}function To(){qn(),++_e;for(var t=en,e;t;)(e=me-t._time)>=0&&t._call.call(void 0,e),t=t._next;--_e}function hr(){me=(nn=Re.now())+ln,_e=Se=0;try{To()}finally{_e=0,No(),me=0}}function Co(){var t=Re.now(),e=t-nn;e>Vr&&(ln-=e,nn=t)}function No(){for(var t,e=en,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:en=n);Ee=t,$n(r)}function $n(t){if(!_e){Se&&(Se=clearTimeout(Se));var e=t-me;e>24?(t<1/0&&(Se=setTimeout(hr,t-Re.now()-ln)),ke&&(ke=clearInterval(ke))):(ke||(nn=Re.now(),ke=setInterval(Co,Vr)),_e=1,Qr(hr))}}function dr(t,e,n){var r=new rn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Ro=Nr("start","end","cancel","interrupt"),$o=[],Zr=0,pr=1,In=2,Ke=3,mr=4,Dn=5,Ve=6;function un(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Io(t,n,{name:e,index:r,group:i,on:Ro,tween:$o,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Zr})}function Bn(t,e){var n=Ut(t,e);if(n.state>Zr)throw new Error("too late; already scheduled");return n}function Qt(t,e){var n=Ut(t,e);if(n.state>Ke)throw new Error("too late; already running");return n}function Ut(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Io(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Jr(s,0,n.time);function s(o){n.state=pr,n.timer.restart(a,n.delay,n.time),n.delay<=o&&a(o-n.delay)}function a(o){var f,m,p,g;if(n.state!==pr)return u();for(f in r)if(g=r[f],g.name===n.name){if(g.state===Ke)return dr(a);g.state===mr?(g.state=Ve,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[f]):+f<e&&(g.state=Ve,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[f])}if(dr(function(){n.state===Ke&&(n.state=mr,n.timer.restart(l,n.delay,n.time),l(o))}),n.state=In,n.on.call("start",t,t.__data__,n.index,n.group),n.state===In){for(n.state=Ke,i=new Array(p=n.tween.length),f=0,m=-1;f<p;++f)(g=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++m]=g);i.length=m+1}}function l(o){for(var f=o<n.duration?n.ease.call(null,o/n.duration):(n.timer.restart(u),n.state=Dn,1),m=-1,p=i.length;++m<p;)i[m].call(t,f);n.state===Dn&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Ve,n.timer.stop(),delete r[e];for(var o in r)return;delete t.__transition}}function Do(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>In&&r.state<Dn,r.state=Ve,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function Oo(t){return this.each(function(){Do(this,t)})}function Fo(t,e){var n,r;return function(){var i=Qt(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,l=r.length;a<l;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Lo(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Qt(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var l={name:e,value:n},u=0,o=i.length;u<o;++u)if(i[u].name===e){i[u]=l;break}u===o&&i.push(l)}s.tween=i}}function Po(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ut(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Fo:Lo)(n,t,e))}function Gn(t,e,n){var r=t._id;return t.each(function(){var i=Qt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ut(i,r).value[e]}}function jr(t,e){var n;return(typeof e=="number"?Bt:e instanceof pe?tn:(n=pe(e))?(e=n,tn):Yr)(t,e)}function Ho(t){return function(){this.removeAttribute(t)}}function zo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qo(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function Bo(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function Go(t,e,n){var r,i,s;return function(){var a,l=n(this),u;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=l+"",a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,l)))}}function Uo(t,e,n){var r,i,s;return function(){var a,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=l+"",a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,l)))}}function Xo(t,e){var n=on(t),r=n==="transform"?So:jr;return this.attrTween(t,typeof e=="function"?(n.local?Uo:Go)(n,r,Gn(this,"attr."+t,e)):e==null?(n.local?zo:Ho)(n):(n.local?Bo:qo)(n,r,e))}function Yo(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Wo(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ko(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Wo(t,s)),n}return i._value=e,i}function Vo(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Yo(t,s)),n}return i._value=e,i}function Qo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=on(t);return this.tween(n,(r.local?Ko:Vo)(r,e))}function Jo(t,e){return function(){Bn(this,t).delay=+e.apply(this,arguments)}}function Zo(t,e){return e=+e,function(){Bn(this,t).delay=e}}function jo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Jo:Zo)(e,t)):Ut(this.node(),e).delay}function tl(t,e){return function(){Qt(this,t).duration=+e.apply(this,arguments)}}function el(t,e){return e=+e,function(){Qt(this,t).duration=e}}function nl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?tl:el)(e,t)):Ut(this.node(),e).duration}function rl(t,e){if(typeof e!="function")throw new Error;return function(){Qt(this,t).ease=e}}function il(t){var e=this._id;return arguments.length?this.each(rl(e,t)):Ut(this.node(),e).ease}function sl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Qt(this,t).ease=n}}function al(t){if(typeof t!="function")throw new Error;return this.each(sl(this._id,t))}function ol(t){typeof t!="function"&&(t=Ir(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,l=r[i]=[],u,o=0;o<a;++o)(u=s[o])&&t.call(u,u.__data__,o,s)&&l.push(u);return new se(r,this._parents,this._name,this._id)}function ll(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var u=e[l],o=n[l],f=u.length,m=a[l]=new Array(f),p,g=0;g<f;++g)(p=u[g]||o[g])&&(m[g]=p);for(;l<r;++l)a[l]=e[l];return new se(a,this._parents,this._name,this._id)}function ul(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function cl(t,e,n){var r,i,s=ul(e)?Bn:Qt;return function(){var a=s(this,t),l=a.on;l!==r&&(i=(r=l).copy()).on(e,n),a.on=i}}function fl(t,e){var n=this._id;return arguments.length<2?Ut(this.node(),n).on.on(t):this.each(cl(n,t,e))}function hl(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function dl(){return this.on("end.remove",hl(this._id))}function pl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ln(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var l=r[a],u=l.length,o=s[a]=new Array(u),f,m,p=0;p<u;++p)(f=l[p])&&(m=t.call(f,f.__data__,p,l))&&("__data__"in f&&(m.__data__=f.__data__),o[p]=m,un(o[p],e,n,p,o,Ut(f,n)));return new se(s,this._parents,e,n)}function ml(t){var e=this._name,n=this._id;typeof t!="function"&&(t=$r(t));for(var r=this._groups,i=r.length,s=[],a=[],l=0;l<i;++l)for(var u=r[l],o=u.length,f,m=0;m<o;++m)if(f=u[m]){for(var p=t.call(f,f.__data__,m,u),g,M=Ut(f,n),K=0,Q=p.length;K<Q;++K)(g=p[K])&&un(g,e,n,K,p,M);s.push(p),a.push(f)}return new se(s,a,e,n)}var gl=$e.prototype.constructor;function vl(){return new gl(this._groups,this._parents)}function yl(t,e){var n,r,i;return function(){var s=ye(this,t),a=(this.style.removeProperty(t),ye(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function ti(t){return function(){this.style.removeProperty(t)}}function _l(t,e,n){var r,i=n+"",s;return function(){var a=ye(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function xl(t,e,n){var r,i,s;return function(){var a=ye(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),ye(this,t))),a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,l))}}function wl(t,e){var n,r,i,s="style."+e,a="end."+s,l;return function(){var u=Qt(this,t),o=u.on,f=u.value[s]==null?l||(l=ti(e)):void 0;(o!==n||i!==f)&&(r=(n=o).copy()).on(a,i=f),u.on=r}}function bl(t,e,n){var r=(t+="")=="transform"?Mo:jr;return e==null?this.styleTween(t,yl(t,r)).on("end.style."+t,ti(t)):typeof e=="function"?this.styleTween(t,xl(t,r,Gn(this,"style."+t,e))).each(wl(this._id,t)):this.styleTween(t,_l(t,r,e),n).on("end.style."+t,null)}function kl(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Al(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&kl(t,a,n)),r}return s._value=e,s}function Ml(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Al(t,e,n??""))}function Sl(t){return function(){this.textContent=t}}function El(t){return function(){var e=t(this);this.textContent=e??""}}function Tl(t){return this.tween("text",typeof t=="function"?El(Gn(this,"text",t)):Sl(t==null?"":t+""))}function Cl(t){return function(e){this.textContent=t.call(this,e)}}function Nl(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Cl(i)),e}return r._value=t,r}function Rl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Nl(t))}function $l(){for(var t=this._name,e=this._id,n=ei(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],l=a.length,u,o=0;o<l;++o)if(u=a[o]){var f=Ut(u,e);un(u,t,n,o,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new se(r,this._parents,t,n)}function Il(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var l={value:a},u={value:function(){--i===0&&s()}};n.each(function(){var o=Qt(this,r),f=o.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),o.on=e}),i===0&&s()})}var Dl=0;function se(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ei(){return++Dl}var re=$e.prototype;se.prototype={constructor:se,select:pl,selectAll:ml,selectChild:re.selectChild,selectChildren:re.selectChildren,filter:ol,merge:ll,selection:vl,transition:$l,call:re.call,nodes:re.nodes,node:re.node,size:re.size,empty:re.empty,each:re.each,on:fl,attr:Xo,attrTween:Qo,style:bl,styleTween:Ml,text:Tl,textTween:Rl,remove:dl,tween:Po,delay:jo,duration:nl,ease:il,easeVarying:al,end:Il,[Symbol.iterator]:re[Symbol.iterator]};function Ol(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Fl={time:null,delay:0,duration:250,ease:Ol};function Ll(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Pl(t){var e,n;t instanceof se?(e=t._id,t=t._name):(e=ei(),(n=Fl).time=qn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],l=a.length,u,o=0;o<l;++o)(u=a[o])&&un(u,t,e,o,a,n||Ll(u,e));return new se(r,this._parents,t,e)}$e.prototype.interrupt=Oo;$e.prototype.transition=Pl;function Hl(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function sn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function xe(t){return t=sn(Math.abs(t)),t?t[1]:NaN}function zl(t,e){return function(n,r){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=t[a=(a+1)%t.length];return s.reverse().join(e)}}function ql(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Bl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function an(t){if(!(e=Bl.exec(t)))throw new Error("invalid format: "+t);var e;return new Un({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}an.prototype=Un.prototype;function Un(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Un.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gl(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ni;function Ul(t,e){var n=sn(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(ni=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+sn(t,Math.max(0,e+s-1))[0]}function gr(t,e){var n=sn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const vr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Hl,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gr(t*100,e),r:gr,s:Ul,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function yr(t){return t}var _r=Array.prototype.map,xr=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Xl(t){var e=t.grouping===void 0||t.thousands===void 0?yr:zl(_r.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?yr:ql(_r.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"â":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function o(m){m=an(m);var p=m.fill,g=m.align,M=m.sign,K=m.symbol,Q=m.zero,q=m.width,V=m.comma,nt=m.precision,st=m.trim,P=m.type;P==="n"?(V=!0,P="g"):vr[P]||(nt===void 0&&(nt=12),st=!0,P="g"),(Q||p==="0"&&g==="=")&&(Q=!0,p="0",g="=");var B=K==="$"?n:K==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",D=K==="$"?r:/[%p]/.test(P)?a:"",c=vr[P],h=/[defgprs%]/.test(P);nt=nt===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,nt)):Math.max(0,Math.min(20,nt));function _(w){var A=B,T=D,tt,vt,ht;if(P==="c")T=c(w)+T,w="";else{w=+w;var z=w<0||1/w<0;if(w=isNaN(w)?u:c(Math.abs(w),nt),st&&(w=Gl(w)),z&&+w==0&&M!=="+"&&(z=!1),A=(z?M==="("?M:l:M==="-"||M==="("?"":M)+A,T=(P==="s"?xr[8+ni/3]:"")+T+(z&&M==="("?")":""),h){for(tt=-1,vt=w.length;++tt<vt;)if(ht=w.charCodeAt(tt),48>ht||ht>57){T=(ht===46?i+w.slice(tt+1):w.slice(tt))+T,w=w.slice(0,tt);break}}}V&&!Q&&(w=e(w,1/0));var et=A.length+w.length+T.length,R=et<q?new Array(q-et+1).join(p):"";switch(V&&Q&&(w=e(R+w,R.length?q-T.length:1/0),R=""),g){case"<":w=A+w+T+R;break;case"=":w=A+R+w+T;break;case"^":w=R.slice(0,et=R.length>>1)+A+w+T+R.slice(et);break;default:w=R+A+w+T;break}return s(w)}return _.toString=function(){return m+""},_}function f(m,p){var g=o((m=an(m),m.type="f",m)),M=Math.max(-8,Math.min(8,Math.floor(xe(p)/3)))*3,K=Math.pow(10,-M),Q=xr[8+M/3];return function(q){return g(K*q)+Q}}return{format:o,formatPrefix:f}}var Ge,Xn,ri;Yl({thousands:",",grouping:[3],currency:["$",""]});function Yl(t){return Ge=Xl(t),Xn=Ge.format,ri=Ge.formatPrefix,Ge}function Wl(t){return Math.max(0,-xe(Math.abs(t)))}function Kl(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xe(e)/3)))*3-xe(Math.abs(t)))}function Vl(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xe(e)-xe(t))+1}function Ql(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Jl(t){return function(){return t}}function Zl(t){return+t}var wr=[0,1];function ge(t){return t}function On(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Jl(isNaN(e)?NaN:.5)}function jl(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function tu(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=On(i,r),s=n(a,s)):(r=On(r,i),s=n(s,a)),function(l){return s(r(l))}}function eu(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=On(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(l){var u=rs(t,l,1,r)-1;return s[u](i[u](l))}}function nu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ru(){var t=wr,e=wr,n=he,r,i,s,a=ge,l,u,o;function f(){var p=Math.min(t.length,e.length);return a!==ge&&(a=jl(t[0],t[p-1])),l=p>2?eu:tu,u=o=null,m}function m(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(r),e,n)))(r(a(p)))}return m.invert=function(p){return a(i((o||(o=l(e,t.map(r),Bt)))(p)))},m.domain=function(p){return arguments.length?(t=Array.from(p,Zl),f()):t.slice()},m.range=function(p){return arguments.length?(e=Array.from(p),f()):e.slice()},m.rangeRound=function(p){return e=Array.from(p),n=bo,f()},m.clamp=function(p){return arguments.length?(a=p?!0:ge,f()):a!==ge},m.interpolate=function(p){return arguments.length?(n=p,f()):n},m.unknown=function(p){return arguments.length?(s=p,m):s},function(p,g){return r=p,i=g,f()}}function iu(){return ru()(ge,ge)}function su(t,e,n,r){var i=ls(t,e,n),s;switch(r=an(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Kl(i,a))&&(r.precision=s),ri(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Vl(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Wl(i))&&(r.precision=s-(r.type==="%")*2);break}}return Xn(r)}function au(t){var e=t.domain;return t.ticks=function(n){var r=e();return os(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return su(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],l=r[s],u,o,f=10;for(l<a&&(o=a,a=l,l=o,o=i,i=s,s=o);f-- >0;){if(o=Sn(a,l,n),o===u)return r[i]=a,r[s]=l,e(r);if(o>0)a=Math.floor(a/o)*o,l=Math.ceil(l/o)*o;else if(o<0)a=Math.ceil(a*o)/o,l=Math.floor(l*o)/o;else break;u=o}return t},t}function Fn(){var t=iu();return t.copy=function(){return nu(t,Fn())},Ql.apply(t,arguments),au(t)}function Te(t,e,n){this.k=t,this.x=e,this.y=n}Te.prototype={constructor:Te,scale:function(t){return t===1?this:new Te(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Te(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Te.prototype;var ou=Ot(`<style class="svelte-2bseyx">body {
      margin: 0;
      padding: 0;
      font-family: nyt-franklin, helvetica, arial, sans-serif;
    }</style>`),lu=Ot('<div class="loading svelte-2bseyx"><div class="spinner svelte-2bseyx"></div> <p class="svelte-2bseyx">Loading data...</p></div>'),uu=Ot('<div class="provision-item svelte-2bseyx"><span class="provision-name svelte-2bseyx"> </span> <span> </span></div>'),cu=Ot('<div class="provision-breakdown svelte-2bseyx"><h4 class="svelte-2bseyx">Breakdown by provision</h4> <div class="provision-list svelte-2bseyx"></div></div>'),fu=Ot('<div class="provision-breakdown svelte-2bseyx"><h4 class="svelte-2bseyx">Breakdown by provision</h4> <p class="no-provisions svelte-2bseyx">No policy provisions affect this household.</p></div>'),hu=Ot('<div class="household-profile svelte-2bseyx"><h3 class="svelte-2bseyx">Individual household profile <div class="header-buttons svelte-2bseyx"><button class="action-button random-button svelte-2bseyx" title="Pick a new random household">ð²</button> <button class="action-button info-button svelte-2bseyx" title="Show detailed data for this household">â</button></div></h3> <div class="household-summary svelte-2bseyx"><p class="svelte-2bseyx"> </p></div> <div class="household-details svelte-2bseyx"><div class="detail-item svelte-2bseyx"><span class="label svelte-2bseyx">Gross income:</span> <span class="value svelte-2bseyx"> </span></div> <div class="detail-item svelte-2bseyx"><span class="label svelte-2bseyx">Net income change:</span> <span> </span></div> <div class="detail-item svelte-2bseyx"><span class="label svelte-2bseyx">Percentage change:</span> <span> </span></div></div> <!></div>'),du=Ot('<section><div class="section-content svelte-2bseyx"><h2 class="svelte-2bseyx"> </h2> <p class="svelte-2bseyx"><!></p> <!></div></section>'),pu=Ot('<span class="svelte-2bseyx"> </span>'),mu=Ot('<span class="svelte-2bseyx"> </span>'),gu=Ot('<span class="svelte-2bseyx"> </span>'),vu=Ot('<tr class="svelte-2bseyx"><td class="key-column svelte-2bseyx"> </td><td class="value-column svelte-2bseyx"><!></td></tr>'),yu=Ot('<div class="data-table-container svelte-2bseyx"><h3 class="svelte-2bseyx">Selected Household Data</h3> <table class="data-table svelte-2bseyx"><tbody class="svelte-2bseyx"></tbody></table> <button class="close-table svelte-2bseyx">Ã</button></div>'),_u=Ot('<div class="app svelte-2bseyx"><!> <div class="nyt-container svelte-2bseyx"><div class="text-column svelte-2bseyx"></div> <div class="viz-column svelte-2bseyx"><div class="viz-sticky svelte-2bseyx"><canvas width="800" height="600" class="main-canvas svelte-2bseyx"></canvas> <svg width="800" height="600" class="overlay-svg svelte-2bseyx"></svg></div></div></div> <!></div>');function Mu(t,e){$i(e,!1);let n=Ht([]),r=Ht(!0),i=Ht(null),s=Ht(),a=Ht(),l=[],u=Ht({}),o=new Map,f=new Map,m=null;const p=[{id:"intro",title:"How tax changes affect every American household",groupText:"Each dot represents a household, positioned by their income and how much they gain or lose under the proposed tax changes. Green dots show households that benefit, red shows those that face increases.",view:{xDomain:[-15,15],yDomain:[0,35e4],filter:d=>d["Gross income"]<35e4,highlightGroup:null}},{id:"lower-income",title:"Lower-income households under $50,000",groupText:"Households earning under $50,000 see varied outcomes. While many benefit from Child Tax Credit expansions and TCJA extensions, some undocumented families lose access to credits due to new SSN requirements. The bill reduces poverty by 5.5% overall, with the bottom decile gaining an average of $342.",view:{xDomain:[-10,15],yDomain:[0,5e4],filter:d=>d["Gross income"]>=0&&d["Gross income"]<5e4,highlightGroup:"lower"}},{id:"middle-income",title:"Middle-income households ($50,000 - $200,000)",groupText:"This broad middle class benefits significantly from TCJA extensions, enhanced Child Tax Credits, and new deductions for tips and overtime pay. Seniors in this range gain substantially from the additional $6,000 senior deduction. These households typically see net income increases from the tax provisions.",view:{xDomain:[-15,25],yDomain:[5e4,2e5],filter:d=>d["Gross income"]>=5e4&&d["Gross income"]<2e5,highlightGroup:"middle"}},{id:"upper-income",title:"Upper-income households ($200,000 - $1 million)",groupText:"Higher earners face more complex outcomes as they benefit from TCJA extensions but encounter new limitations. The $40,000 SALT cap provides relief compared to the current $10,000 limit, but itemized deduction limitations at the 35% bracket reduce benefits. Many still see net gains, but the effects vary widely based on deduction usage.",view:{xDomain:[-30,30],yDomain:[2e5,1e6],filter:d=>d["Gross income"]>=2e5&&d["Gross income"]<1e6,highlightGroup:"upper"}},{id:"highest-income",title:"Highest-income households ($1 million+)",groupText:"The wealthiest households experience the largest absolute gains but face the most limitations. While they benefit from rate reductions and QBID provisions, new restrictions on itemized deductions and charitable contribution floors reduce their benefits. The top 10% gains most in absolute terms, averaging $13,231, contributing to a 0.4% increase in income inequality.",view:{xDomain:[-50,50],yDomain:[1e6,1e7],filter:d=>d["Gross income"]>=1e6,highlightGroup:"highest"}}],g=[];p.forEach((d,x)=>{g.push({...d,text:d.groupText,viewType:"group"}),x>0&&g.push({...d,id:d.id+"-individual",title:d.title+" â individual profile",text:"Meet a specific household affected by these changes.",viewType:"individual"})}),Yn(async()=>{try{const x=await(await fetch("/obbba-scatter/household_tax_income_changes_senate_current_law_baseline.csv")).text(),b=Zi.parse(x,{header:!0,dynamicTyping:!0,skipEmptyLines:!0});Mt(n,b.data.map((k,y)=>({...k,id:y,isAnnotated:!1,sectionIndex:null}))),p.forEach((k,y)=>{const S=v(n).filter(k.view.filter);if(S.length>0){const I=(k.view.yDomain[0]+k.view.yDomain[1])/2,U=(k.view.xDomain[0]+k.view.xDomain[1])/2;let C=null,$=1/0;if(S.forEach(E=>{const X=(E["Percentage change in net income"]-U)/(k.view.xDomain[1]-k.view.xDomain[0]),F=(E["Gross income"]-I)/(k.view.yDomain[1]-k.view.yDomain[0]),L=Math.sqrt(X*X+F*F);L<$&&($=L,C=E)}),C&&(C.isHighlighted=!0,C.highlightGroup=k.view.highlightGroup,C.stateIndex=y),y>0){const E=H(S);E&&be(u,v(u)[k.id]=E)}}}),Mt(r,!1)}catch(d){console.error("Error loading data:",d),Mt(r,!1)}});function M(d,x,b,k,y=800){o.has(d)&&clearInterval(o.get(d));const S=document.getElementById(d);if(!S)return;const I=performance.now();function U($){const E=$-I,X=Math.min(E/y,1),F=1-Math.pow(1-X,3),L=x+(b-x)*F;if(S.textContent=k(L),X<1){const lt=requestAnimationFrame(U);o.set(d,lt)}else o.delete(d)}const C=requestAnimationFrame(U);o.set(d,C)}function K(d,x=600){m&&cancelAnimationFrame(m);const b=performance.now();function k(y){const S=y-b,I=Math.min(S/x,1),U=1-Math.pow(1-I,3),C=1+Math.sin(U*Math.PI)*.8;f.set(d,{scale:C,opacity:1,isAnimating:I<1}),v(c)||T(),I<1?m=requestAnimationFrame(k):(f.delete(d),m=null,v(c)||T())}m=requestAnimationFrame(k)}function Q(d){return"$"+Math.round(d).toLocaleString()}function q(d){return(d>=0?"+":"")+d.toFixed(1)+"%"}function V(d){return(d>=0?"+":"")+"$"+Math.abs(Math.round(d)).toLocaleString()}function nt(d){if(!d)return"";const x=d["Gross income"],b=d["Baseline net income"],k=d["Total change in net income"],y=d["Percentage change in net income"];d["Household size"];const S=d["Is married"],I=d["Number of dependents"],U=d["Age of head"],C=d.State,$=S?I>0?`married couple with ${I} dependent${I>1?"s":""}`:"married couple":I>0?`single parent with ${I} dependent${I>1?"s":""}`:"single person",E=k>0?"gains":"loses";return`This household is a ${$} living in ${C}. The head of household is ${U} years old. Under the baseline tax system, this household has a gross income of $${x.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})} and a net income of $${b.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}. After the proposed tax reforms, this household ${E} $${Math.abs(k).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})} annually, representing a ${Math.abs(y).toFixed(1)}% ${k>0?"increase":"decrease"} in their net income.`}function st(d){return d?[{name:"Tax rate reform",key:"Change in net income after tax rate reform"},{name:"Standard deduction reform",key:"Change in net income after standard deduction reform"},{name:"Exemption reform",key:"Change in net income after exemption reform"},{name:"Child Tax Credit reform",key:"Change in net income after CTC reform"},{name:"QBID reform",key:"Change in net income after QBID reform"},{name:"AMT reform",key:"Change in net income after AMT reform"},{name:"Miscellaneous reform",key:"Change in net income after miscellaneous reform"},{name:"Other itemized deductions reform",key:"Change in net income after other itemized deductions reform"},{name:"Limitation on itemized deductions reform",key:"Change in net income after limitation on itemized deductions reform"},{name:"Estate tax reform",key:"Change in net income after estate tax reform"},{name:"Senior deduction reform",key:"Change in net income after senior deduction reform"},{name:"Tip income exempt",key:"Change in net income after tip income exempt"},{name:"Overtime income exempt",key:"Change in net income after overtime income exempt"},{name:"Auto loan interest ALD",key:"Change in net income after auto loan interest ALD"},{name:"SALT reform",key:"Change in net income after SALT reform"},{name:"CDCC reform",key:"Change in net income after CDCC reform"},{name:"ACA enhanced subsidies reform",key:"Change in net income after ACA enhanced subsidies reform"},{name:"SNAP takeup reform",key:"Change in net income after SNAP takeup reform"},{name:"ACA takeup reform",key:"Change in net income after ACA takeup reform"},{name:"Medicaid takeup reform",key:"Change in net income after Medicaid takeup reform"}].map((b,k)=>({name:b.name,value:d[b.key]||0,index:k})).filter(b=>Math.abs(b.value)>.01).sort((b,k)=>Math.abs(k.value)-Math.abs(b.value)):[]}let P=Ht([]),B=Ht(0),D=0,c=Ht(!1),h;function _(){h&&h.disconnect();const d=document.querySelector(".text-column");d&&(h=new IntersectionObserver(x=>{let b=null,k=0;x.forEach(y=>{const S=parseInt(y.target.dataset.index);y.isIntersecting&&y.intersectionRatio>k&&(k=y.intersectionRatio,b={entry:y,index:S})}),b&&b.index!==v(B)&&!v(c)&&w(b.index)},{root:d,threshold:[0,.1,.3,.5,.7,.9,1],rootMargin:"-30% 0px -30% 0px"}),v(P).forEach((x,b)=>{x&&(x.dataset.index=b.toString(),h.observe(x))}))}function w(d){var k,y,S;if(d===v(B)||v(c))return;Mt(c,!0),D=v(B);const x=g[v(B)],b=g[d];if(b.viewType==="individual"){const I=(k=p[Math.floor(d/2)])==null?void 0:k.id,U=v(n).filter(((S=(y=p[Math.floor(d/2)])==null?void 0:y.view)==null?void 0:S.filter)||(()=>!0));if(U.length>0){const C=H(U);C&&(be(u,v(u)[I]=C),Mt(u,{...v(u)}))}}Mt(B,d),A({from:x.view,to:b.view,duration:1200,onComplete:()=>{Mt(c,!1)}})}function A({from:d,to:x,duration:b,onComplete:k}){const y=performance.now();function S(I){const U=I-y,C=Math.min(U/b,1),$=C<.5?4*C*C*C:1-Math.pow(-2*C+2,3)/2;T(d,x,$),C<1?requestAnimationFrame(S):k()}requestAnimationFrame(S)}function T(d=null,x=null,b=0){if(!v(n).length||!v(s))return;const k=v(s),y=k.getContext("2d",{alpha:!1}),S=window.devicePixelRatio||1,I=800,U=600;k.width=I*S,k.height=U*S,k.style.width=I+"px",k.style.height=U+"px",y.scale(S,S);const C=I,$=U,E={top:80,right:120,bottom:100,left:100};let X,F,L;v(c)&&d!==null&&x!==null?(X=d,F=x,L=b):(X=g[v(B)].view,F=X,L=0);const lt=he(X.yDomain[0],F.yDomain[0])(L),it=he(X.yDomain[1],F.yDomain[1])(L),Rt=he(X.xDomain[0],F.xDomain[0])(L),St=he(X.xDomain[1],F.xDomain[1])(L);y.fillStyle="#ffffff",y.fillRect(0,0,C,$);let ot=v(n);v(c)&&d&&x?ot=v(n).filter(Y=>{const mt=d.filter?d.filter(Y):!0,Et=x.filter?x.filter(Y):!0;return mt||Et}):ot=v(n).filter(Y=>Y["Gross income"]>=0&&Y["Gross income"]<=15e6&&Y["Percentage change in net income"]>=-100&&Y["Percentage change in net income"]<=100);const kt=Fn().domain([Rt,St]).range([E.left,C-E.right]),$t=Fn().domain([lt,it]).range([$-E.bottom,E.top]);y.strokeStyle="#DFDFDF",y.lineWidth=.5,y.setLineDash([]);const Jt=Math.max(5,Math.floor((St-Rt)/10));for(let Y=Math.ceil(Rt/Jt)*Jt;Y<=St;Y+=Jt){const mt=kt(Y);y.beginPath(),y.moveTo(mt,E.top),y.lineTo(mt,$-E.bottom),y.stroke()}if($t.ticks(6).forEach(Y=>{const mt=$t(Y);y.beginPath(),y.moveTo(E.left,mt),y.lineTo(C-E.right,mt),y.stroke()}),l=[],ot.forEach(Y=>{var De,Oe;const mt=kt(Y["Percentage change in net income"]),Et=$t(Y["Gross income"]);if(mt<E.left||mt>C-E.right||Et<E.top||Et>$-E.bottom)return;let Ct=1;if(v(c)&&d&&x&&L!==void 0){const Lt=d.filter?d.filter(Y):!0,yt=x.filter?x.filter(Y):!0;Lt&&yt?Ct=1:Lt&&!yt?Ct=1-L*L:!Lt&&yt?Ct=L*(2-L):Ct=0}else{const Lt=X;Ct=(Lt.filter?Lt.filter(Y):!0)?1:0}let xt;const It=Y["Percentage change in net income"];Math.abs(It)<.1?xt="#999999":It>0?xt="#1a9658":xt="#d75442";const Tt=g[v(B)],qt=v(c)?g[D]:Tt,Yt=Y.isHighlighted&&Y.stateIndex===Math.floor(v(B)/2);let wt=!1;if((Tt==null?void 0:Tt.viewType)==="individual"){const Lt=(De=p[Math.floor(v(B)/2)])==null?void 0:De.id,yt=v(u)[Lt];wt=yt&&Y.id===yt.id}if(v(c)&&(qt==null?void 0:qt.viewType)==="individual"){const Lt=(Oe=p[Math.floor(D/2)])==null?void 0:Oe.id,yt=v(u)[Lt];yt&&(Y.id,yt.id)}const Ft=Yt||wt;let Wt=Ft?wt?6:4:2,le=Ft?1:.7;const Zt=f.get(Y.id);Zt&&Zt.isAnimating&&(Wt=Wt*Zt.scale,le=Math.min(le*Zt.opacity,1)),(Tt==null?void 0:Tt.viewType)==="individual"&&!wt&&(le*=.2);const ue=le*Ct;ue>.02&&(l.push({x:mt,y:Et,radius:Wt,data:Y,opacity:ue}),y.globalAlpha=ue,y.fillStyle=xt,y.beginPath(),y.arc(mt,Et,Wt,0,2*Math.PI),y.fill(),Ft&&ue>.5&&(y.globalAlpha=ue,y.strokeStyle="#000000",y.lineWidth=1,y.stroke()))}),y.globalAlpha=1,Rt<=0&&St>=0&&(y.strokeStyle="#000000",y.lineWidth=2,y.beginPath(),y.moveTo(kt(0),E.top),y.lineTo(kt(0),$-E.bottom),y.stroke()),v(a)){const Y=Za(v(a));Y.selectAll("*").remove();const mt=Y.append("g"),Et=mt.append("g").attr("transform",`translate(0,${$-E.bottom})`).call(ms(kt).tickFormat(xt=>`${xt>0?"+":""}${xt}%`)).style("font-family","Roboto Mono, monospace").style("font-size","10px").style("color","#121212"),Ct=mt.append("g").attr("transform",`translate(${E.left},0)`).call(gs($t).ticks(6).tickFormat(xt=>Xn("$,")(xt))).style("font-family","Roboto Mono, monospace").style("font-size","10px").style("color","#121212");Et.select(".domain").style("stroke","#000000").style("stroke-width",1),Ct.select(".domain").style("stroke","#000000").style("stroke-width",1),Et.selectAll(".tick line").style("stroke","#000000").style("stroke-width",.5),Ct.selectAll(".tick line").style("stroke","#000000").style("stroke-width",.5),mt.append("text").attr("x",C/2).attr("y",$-15).attr("text-anchor","middle").style("font-family","Roboto Serif, serif").style("font-size","16px").style("font-weight","400").style("fill","#666666").text("Change in income â"),mt.append("text").attr("transform","rotate(-90)").attr("x",-$/2).attr("y",25).attr("text-anchor","middle").style("font-family","Roboto Serif, serif").style("font-size","16px").style("font-weight","400").style("fill","#666666").text("Annual household income â")}}let tt=Ht({}),vt=Ht(null);Yn(()=>(Mt(P,new Array(g.length)),setTimeout(()=>{_(),v(n).length&&v(s)&&T()},200),()=>{h&&h.disconnect()}));let ht;function z(d){v(P).length&&(ht&&clearTimeout(ht),ht=setTimeout(()=>{et(d.target)},50))}function et(d){if(v(c))return;const x=d.scrollTop,b=d.clientHeight,k=d.querySelectorAll(".text-section"),y=Array.from(k);let S=0,I=1/0;y.forEach((U,C)=>{if(U){const $=U.getBoundingClientRect(),E=d.getBoundingClientRect(),F=$.top-E.top+x+$.height/2,L=x+b/2,lt=Math.abs(F-L);lt<I&&(I=lt,S=C)}}),S!==v(B)&&I!==1/0&&w(S)}function R(d){var U;if(!v(s)||!l.length)return;const x=v(s).getBoundingClientRect(),b=d.clientX-x.left,k=d.clientY-x.top;let y=null,S=1/0;const I=8;for(const C of l){if(C.opacity<.1)continue;const $=b-C.x,E=k-C.y,X=Math.sqrt($*$+E*E);X<=C.radius+I&&X<S&&(S=X,y=C)}if(y){K(y.data.id);const C=g[v(B)];if((C==null?void 0:C.viewType)==="individual"){const $=(U=p[Math.floor(v(B)/2)])==null?void 0:U.id;$&&(be(u,v(u)[$]=y.data),Mt(u,{...v(u)}))}}}function _t(d){d&&Mt(i,d)}function H(d){if(!d||d.length===0)return null;const x=d.reduce((k,y)=>k+(y["Household weight"]||1),0);let b=Math.random()*x;for(const k of d)if(b-=k["Household weight"]||1,b<=0)return k;return d[d.length-1]}function W(){const d=g[v(B)];if((d==null?void 0:d.viewType)==="individual"){const x=Math.floor(v(B)/2),b=p[x];if(b){const k=v(n).filter(b.view.filter),y=H(k);y&&(K(y.id),be(u,v(u)[b.id]=y),Mt(u,{...v(u)}))}}}Pe(()=>(v(n),v(s),v(c)),()=>{v(n).length&&v(s)&&!v(c)&&T()}),Pe(()=>(v(u),v(tt),v(B)),()=>{typeof window<"u"&&(Object.keys(v(u)).forEach(d=>{const x=v(u)[d],b=v(tt)[d];if(x&&b&&x.id!==b.id){const k=g.findIndex(y=>{var S;return y.viewType==="individual"&&((S=p[Math.floor(g.indexOf(y)/2)])==null?void 0:S.id)===d});if(k>=0){const y=k===v(B),S=y?50:100,I=y?400:600;setTimeout(()=>{M(`gross-income-${k}`,b["Gross income"],x["Gross income"],Q,I)},S),setTimeout(()=>{M(`net-change-${k}`,b["Total change in net income"],x["Total change in net income"],V,I)},S+100),setTimeout(()=>{M(`percent-change-${k}`,b["Percentage change in net income"],x["Percentage change in net income"],q,I)},S+200);const U=st(x),C=st(b);U.forEach(($,E)=>{const X=C.find(L=>L.index===$.index),F=X?X.value:0;setTimeout(()=>{M(`provision-${k}-${$.index}`,F,$.value,V,I)},S+300+E*20)})}}}),Mt(tt,{...v(u)}))}),Pe(()=>(v(i),v(vt)),()=>{if(typeof window<"u"&&v(i)&&v(vt)){let d=0;Object.entries(v(i)).forEach(([x,b])=>{if(x!=="id"&&x!=="isAnnotated"&&x!=="sectionIndex"&&x!=="isHighlighted"&&x!=="highlightGroup"&&x!=="stateIndex"){if(typeof b=="number"){const k=v(vt)[x];typeof k=="number"&&k!==b&&setTimeout(()=>{x.includes("Income")||x.includes("Taxes")||x.includes("Net Income Change")?M(`table-value-${d}`,k,b,y=>"$"+Math.round(y).toLocaleString(),400):x.includes("Percentage")?M(`table-value-${d}`,k,b,y=>(y>0?"+":"")+y.toFixed(2)+"%",400):M(`table-value-${d}`,k,b,y=>Math.round(y).toLocaleString(),400)},d*50)}d++}})}Mt(vt,v(i)?{...v(i)}:null)}),Pe(()=>v(P),()=>{v(P).length>0&&v(P).every(d=>d)&&setTimeout(()=>{_()},50)}),Ii(),oi();var N=_u();li(d=>{var x=ou();Oi.title="NYT-Style Scatterplot",At(d,x)});var ct=j(N);{var ft=d=>{var x=lu();At(d,x)};ne(ct,d=>{v(r)&&d(ft)})}var dt=gt(ct,2),bt=j(dt);_n(bt,5,()=>g,yn,(d,x,b)=>{var k=du();let y;ae(k,"data-index",b);var S=j(k),I=j(S),U=j(I,!0);J(I);var C=gt(I,2),$=j(C);Bi($,()=>(v(x),ut(()=>v(x).text))),J(C);var E=gt(C,2);{var X=F=>{var L=mn();const lt=Kt(()=>ut(()=>{var ot;return(ot=p[Math.floor(b/2)])==null?void 0:ot.id})),it=Kt(()=>(v(u),ee(v(lt)),ut(()=>v(u)[v(lt)])));var Rt=gn(L);{var St=ot=>{var kt=hu();const $t=Kt(()=>(ee(v(it)),ut(()=>st(v(it)))));var Jt=j(kt),Xt=gt(j(Jt)),Y=j(Xt),mt=gt(Y,2);J(Xt),J(Jt);var Et=gt(Jt,2),Ct=j(Et),xt=j(Ct,!0);J(Ct),J(Et);var It=gt(Et,2),Tt=j(It),qt=gt(j(Tt),2);ae(qt,"id",`gross-income-${b}`);var Yt=j(qt,!0);J(qt),J(Tt);var wt=gt(Tt,2),Ft=gt(j(wt),2);ae(Ft,"id",`net-change-${b}`);var Wt=j(Ft,!0);J(Ft),J(wt);var le=gt(wt,2),Zt=gt(j(le),2);ae(Zt,"id",`percent-change-${b}`);var ue=j(Zt,!0);J(Zt),J(le),J(It);var De=gt(It,2);{var Oe=yt=>{var jt=cu(),Fe=gt(j(jt),2);_n(Fe,5,()=>v($t),yn,(cn,te)=>{var fn=uu(),hn=j(fn),ii=j(hn);J(hn);var Le=gt(hn,2),si=j(Le,!0);J(Le),J(fn),ie(ai=>{Pt(ii,`${v(te),ut(()=>v(te).name)??""}:`),He(Le,1,`provision-value ${v(te),ut(()=>v(te).value>0?"positive":v(te).value<0?"negative":"neutral")??""}`,"svelte-2bseyx"),ae(Le,"id",`provision-${b}-${v(te),ut(()=>v(te).index)??""}`),Pt(si,ai)},[()=>(v(te),ut(()=>V(v(te).value)))],Kt),At(cn,fn)}),J(Fe),J(jt),At(yt,jt)},Lt=yt=>{var jt=fu();At(yt,jt)};ne(De,yt=>{ee(v($t)),ut(()=>v($t).length>0)?yt(Oe):yt(Lt,!1)})}J(kt),ie((yt,jt,Fe,cn)=>{Pt(xt,yt),Pt(Yt,jt),He(Ft,1,`value ${ee(v(it)),ut(()=>v(it)["Total change in net income"]>0?"positive":"negative")??""}`,"svelte-2bseyx"),Pt(Wt,Fe),He(Zt,1,`value ${ee(v(it)),ut(()=>v(it)["Percentage change in net income"]>0?"positive":"negative")??""}`,"svelte-2bseyx"),Pt(ue,cn)},[()=>(ee(v(it)),ut(()=>nt(v(it)))),()=>(ee(v(it)),ut(()=>Q(v(it)["Gross income"]))),()=>(ee(v(it)),ut(()=>V(v(it)["Total change in net income"]))),()=>(ee(v(it)),ut(()=>q(v(it)["Percentage change in net income"])))],Kt),we("click",Y,W),we("click",mt,()=>_t(v(it))),At(ot,kt)};ne(Rt,ot=>{v(it)&&ot(St)})}At(F,L)};ne(E,F=>{v(x),ut(()=>v(x).viewType==="individual")&&F(X)})}J(S),J(k),vn(k,(F,L)=>be(P,v(P)[L]=F),F=>{var L;return(L=v(P))==null?void 0:L[F]},()=>[b]),ie(F=>{y=He(k,1,"text-section svelte-2bseyx",null,y,F),Pt(U,(v(x),ut(()=>v(x).title)))},[()=>({active:b===v(B)})],Kt),At(d,k)}),J(bt);var G=gt(bt,2),Z=j(G),rt=j(Z);vn(rt,d=>Mt(s,d),()=>v(s));var O=gt(rt,2);vn(O,d=>Mt(a,d),()=>v(a)),J(Z),J(G),J(dt);var at=gt(dt,2);{var pt=d=>{var x=yu(),b=gt(j(x),2),k=j(b);_n(k,5,()=>(v(i),ut(()=>Object.entries(v(i)))),yn,(S,I,U)=>{var C=Fi(()=>Li(v(I),2));let $=()=>v(C)[0],E=()=>v(C)[1];var X=mn(),F=gn(X);{var L=lt=>{var it=vu(),Rt=j(it),St=j(Rt,!0);J(Rt);var ot=gt(Rt),kt=j(ot);{var $t=Xt=>{var Y=mn(),mt=gn(Y);{var Et=xt=>{var It=pu();ae(It,"id",`table-value-${U}`);var Tt=j(It);J(It),ie(qt=>Pt(Tt,`$${qt??""}`),[()=>(E(),ut(()=>E().toLocaleString()))],Kt),At(xt,It)},Ct=(xt,It)=>{{var Tt=Yt=>{var wt=mu();ae(wt,"id",`table-value-${U}`);var Ft=j(wt);J(wt),ie(Wt=>Pt(Ft,`${E()>0?"+":""}${Wt??""}%`),[()=>(E(),ut(()=>E().toFixed(2)))],Kt),At(Yt,wt)},qt=Yt=>{var wt=gu();ae(wt,"id",`table-value-${U}`);var Ft=j(wt,!0);J(wt),ie(Wt=>Pt(Ft,Wt),[()=>(E(),ut(()=>E().toLocaleString()))],Kt),At(Yt,wt)};ne(xt,Yt=>{$(),ut(()=>$().includes("Percentage"))?Yt(Tt):Yt(qt,!1)},It)}};ne(mt,xt=>{$(),ut(()=>$().includes("Income")||$().includes("Taxes")||$().includes("Net Income Change"))?xt(Et):xt(Ct,!1)})}At(Xt,Y)},Jt=Xt=>{var Y=Pi();ie(()=>Pt(Y,E())),At(Xt,Y)};ne(kt,Xt=>{typeof E()=="number"?Xt($t):Xt(Jt,!1)})}J(ot),J(it),ie(()=>Pt(St,$())),At(lt,it)};ne(F,lt=>{$()!=="id"&&$()!=="isAnnotated"&&$()!=="sectionIndex"&&$()!=="isHighlighted"&&$()!=="highlightGroup"&&$()!=="stateIndex"&&lt(L)})}At(S,X)}),J(k),J(b);var y=gt(b,2);J(x),we("click",y,()=>Mt(i,null)),At(d,x)};ne(at,d=>{v(i)&&d(pt)})}J(N),we("scroll",bt,z),we("click",rt,R),At(t,N),Di()}export{Mu as component};
